<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Plant Disease Library | PlantAI</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* ===== GLOBAL ===== */
body {
    margin: 0;
    font-family: "Segoe UI", sans-serif;
    background: #f4f7f5;
    color: #333;
}

/* ===== TOP BAR ===== */
.top-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 40px;
    background: #ffffff;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
}

.logo {
    font-size: 22px;
    font-weight: bold;
    color: #2e7d32;
}

.top-nav a {
    margin-left: 20px;
    text-decoration: none;
    color: #555;
    font-weight: 500;
}

.top-nav a:hover {
    color: #2e7d32;
}

/* ===== PAGE HEADER ===== */
.header {
    text-align: center;
    padding: 40px 20px 20px;
}

.header h1 {
    font-size: 34px;
    color: #2e7d32;
}

.header p {
    max-width: 700px;
    margin: 10px auto;
    color: #666;
}

/* ===== SEARCH & FILTER ===== */
.controls {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin: 20px;
    flex-wrap: wrap;
}

.controls input,
.controls select {
    padding: 12px;
    border-radius: 10px;
    border: 1px solid #ccc;
    min-width: 200px;
}

/* ===== DISEASE GRID ===== */
.library-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: 25px;
    padding: 30px;
    max-width: 1200px;
    margin: auto;
}

.disease-card {
    background: #fff;
    border-radius: 16px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.08);
    overflow: hidden;
    transition: transform 0.2s;
}

.disease-card:hover {
    transform: translateY(-5px);
}

.disease-card img {
    width: 100%;
    height: 170px;
    object-fit: cover;
}

.card-content {
    padding: 15px;
}

.card-content h3 {
    margin: 0;
    color: #2e7d32;
}

.badge {
    display: inline-block;
    padding: 5px 10px;
    font-size: 12px;
    border-radius: 20px;
    color: #fff;
    margin: 8px 0;
}

.Healthy { background: #2e7d32; }
.Moderate { background: #f9a825; }
.Severe { background: #c62828; }

.card-content p {
    font-size: 14px;
    color: #555;
}

/* ===== INFO SECTION ===== */
.info-box {
    background: #ffffff;
    padding: 30px;
    margin: 40px auto;
    max-width: 900px;
    border-radius: 16px;
    box-shadow: 0 6px 16px rgba(0,0,0,0.08);
}

.info-box h2 {
    color: #2e7d32;
    margin-bottom: 10px;
}
</style>
</head>

<body>

<!-- ===== NAV BAR ===== -->
<header class="top-bar">
    <div class="logo">ðŸŒ± PlantAI</div>
    <nav class="top-nav">
        <a href="/dashboard">Dashboard</a>
        <a href="/detect">Detect</a>
        <a href="/library">Library</a>
        <a href="/action-guide">Action Guide</a>
        <a href="/about">About</a>
    </nav>
</header>

<!-- ===== HEADER ===== -->
<section class="header">
    <h1>Plant Disease Library</h1>
    <p>
        Explore plant diseases with images, severity levels,
        causes, and prevention guidance.
    </p>
</section>

<!-- ===== SEARCH & FILTER ===== -->
<div class="controls">
    <input type="text" id="searchInput" placeholder="Search disease...">
    <select id="severityFilter">
        <option value="">All Severities</option>
        <option value="Healthy">Healthy</option>
        <option value="Moderate">Moderate</option>
        <option value="Severe">Severe</option>
    </select>
</div>

<!-- ===== DISEASE CARDS ===== -->
<div class="library-grid">

{% for name, info in diseases.items() %}
<div class="disease-card"
     id="{{ name }}"
     data-name="{{ name|lower }}"
     data-severity="{{ info.severity }}">

    <img src="{{ info.image }}" alt="{{ name }}">

    <div class="card-content">
        <h3>{{ name.replace('_',' ') }}</h3>

        <span class="badge {{ info.severity }}">
            {{ info.severity }}
        </span>

        <p>{{ info.description }}</p>
    </div>
</div>
{% endfor %}

</div>

<!-- ===== WHY AI SECTION ===== -->
<div class="info-box">
    <h2>When should you use AI Detection?</h2>
    <ul>
        <li>Early symptoms are unclear</li>
        <li>Manual diagnosis is confusing</li>
        <li>Quick and confidence-based results are needed</li>
    </ul>
</div>

<!-- ===== JAVASCRIPT ===== -->
<script>
const searchInput = document.getElementById("searchInput");
const severityFilter = document.getElementById("severityFilter");

function filterDiseases() {
    const search = searchInput.value.toLowerCase();
    const severity = severityFilter.value;

    document.querySelectorAll(".disease-card").forEach(card => {
        const name = card.dataset.name;
        const sev = card.dataset.severity;

        const matchName = name.includes(search);
        const matchSeverity = !severity || sev === severity;

        card.style.display = (matchName && matchSeverity) ? "block" : "none";
    });
}

searchInput.addEventListener("input", filterDiseases);
severityFilter.addEventListener("change", filterDiseases);

/* ===== AUTO SCROLL FROM DETECT ===== */
window.onload = function () {
    const highlight = "{{ highlight }}";
    if (!highlight) return;

    const card = document.getElementById(highlight);
    if (card) {
        card.scrollIntoView({ behavior: "smooth", block: "center" });
        card.style.boxShadow = "0 0 0 4px #2e7d32";
    }
};
</script>

</body>
</html>